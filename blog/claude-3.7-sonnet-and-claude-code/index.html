<!DOCTYPE html>
<html lang="en" dir="auto">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.min.js" integrity="sha384-........" crossorigin="anonymous"></script>
<script>
MathJax = {
    tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    processEnvironments: true
    },
    svg: {
    fontCache: 'global'
    }
};
</script>


<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Claude 3.7 Sonnet and Claude Code | Nihal Jain</title>
<meta name="keywords" content="agentic-ai, predictions, news">
<meta name="description" content="Link. Originally published: Feb 24, 2025.

we’re announcing Claude 3.7 Sonnet1, our most intelligent model to date and the first hybrid reasoning model on the market.

API users also have fine-grained control over how long the model can think for

we’re also introducing a command line tool for agentic coding, Claude Code. Claude Code is available as a limited research preview, and enables developers to delegate substantial engineering tasks to Claude directly from their terminal.">
<meta name="author" content="">
<link rel="canonical" href="https://nihaljn.github.io/blog/claude-3.7-sonnet-and-claude-code/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.584cf6925785f85c8db0eb29ba33a053d136ee228b1d9b4e61a67aa6cf00641e.css" integrity="sha256-WEz2kleF&#43;FyNsOspujOgU9E27iKLHZtOYaZ6ps8AZB4=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://nihaljn.github.io/columbia-favicon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://nihaljn.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://nihaljn.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://nihaljn.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://nihaljn.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://nihaljn.github.io/blog/claude-3.7-sonnet-and-claude-code/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css" integrity="sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js" integrity="sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>




<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200..900&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Devanagari:wght@100..900&display=swap" rel="stylesheet"><link href="https://cdn.jsdelivr.net/gh/bitmaks/cm-web-fonts@latest/fonts.css" rel="stylesheet">

<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script><script>
document.addEventListener('DOMContentLoaded', function() {
    const toggleButton = document.getElementById('theme-toggle');
    if (toggleButton) {
        
        const moonIcon = toggleButton.querySelector('#moon');
        const sunIcon = toggleButton.querySelector('#sun');
        
        
        const wrapper = document.createElement('div');
        wrapper.className = 'theme-toggle-wrapper';
        
        
        const menu = document.getElementById('menu');
        if (menu) {
            const menuItem = document.createElement('li');
            menuItem.appendChild(wrapper);
            menu.appendChild(menuItem);
        } else {
            
            toggleButton.parentNode.insertBefore(wrapper, toggleButton);
        }
        
        if (sunIcon) {
            toggleButton.removeChild(sunIcon);
            wrapper.appendChild(sunIcon);
        }
        
        
        wrapper.appendChild(toggleButton);

        
        if (moonIcon) {
            toggleButton.removeChild(moonIcon);
            wrapper.appendChild(moonIcon);
        }
        
        
        const thumb = document.createElement('div');
        thumb.className = 'toggle-thumb';
        toggleButton.appendChild(thumb);
    }
});
</script><script>
function toggleSection(sectionId) {
    const content = document.getElementById(sectionId + '-content');
    const button = document.querySelector('.' + sectionId + '-toggle');
    const arrow = document.getElementById(sectionId + '-arrow');
    
    if (content.classList.contains('expanded')) {
        content.classList.remove('expanded');
        button.classList.remove('expanded');
        arrow.textContent = '>';
    } else {
        content.classList.add('expanded');
        button.classList.add('expanded');
        arrow.textContent = 'v';
    }
}


function toggleMoreInfo() {
    toggleSection('more-info');
}
</script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-9BZ254GT1K"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-9BZ254GT1K');
        }
      </script><meta property="og:url" content="https://nihaljn.github.io/blog/claude-3.7-sonnet-and-claude-code/">
  <meta property="og:site_name" content="Nihal Jain">
  <meta property="og:title" content="Claude 3.7 Sonnet and Claude Code">
  <meta property="og:description" content="Link. Originally published: Feb 24, 2025.
we’re announcing Claude 3.7 Sonnet1, our most intelligent model to date and the first hybrid reasoning model on the market.
API users also have fine-grained control over how long the model can think for
we’re also introducing a command line tool for agentic coding, Claude Code. Claude Code is available as a limited research preview, and enables developers to delegate substantial engineering tasks to Claude directly from their terminal.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2025-03-24T23:50:04-04:00">
    <meta property="article:modified_time" content="2025-03-24T23:50:04-04:00">
    <meta property="article:tag" content="agentic-ai">
    <meta property="article:tag" content="predictions">
    <meta property="article:tag" content="news">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Claude 3.7 Sonnet and Claude Code">
<meta name="twitter:description" content="Link. Originally published: Feb 24, 2025.

we’re announcing Claude 3.7 Sonnet1, our most intelligent model to date and the first hybrid reasoning model on the market.

API users also have fine-grained control over how long the model can think for

we’re also introducing a command line tool for agentic coding, Claude Code. Claude Code is available as a limited research preview, and enables developers to delegate substantial engineering tasks to Claude directly from their terminal.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Blog",
      "item": "https://nihaljn.github.io/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Claude 3.7 Sonnet and Claude Code",
      "item": "https://nihaljn.github.io/blog/claude-3.7-sonnet-and-claude-code/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Claude 3.7 Sonnet and Claude Code",
  "name": "Claude 3.7 Sonnet and Claude Code",
  "description": "Link. Originally published: Feb 24, 2025.\nwe’re announcing Claude 3.7 Sonnet1, our most intelligent model to date and the first hybrid reasoning model on the market.\nAPI users also have fine-grained control over how long the model can think for\nwe’re also introducing a command line tool for agentic coding, Claude Code. Claude Code is available as a limited research preview, and enables developers to delegate substantial engineering tasks to Claude directly from their terminal.\n",
  "keywords": [
    "agentic-ai", "predictions", "news"
  ],
  "articleBody": "Link. Originally published: Feb 24, 2025.\nwe’re announcing Claude 3.7 Sonnet1, our most intelligent model to date and the first hybrid reasoning model on the market.\nAPI users also have fine-grained control over how long the model can think for\nwe’re also introducing a command line tool for agentic coding, Claude Code. Claude Code is available as a limited research preview, and enables developers to delegate substantial engineering tasks to Claude directly from their terminal.\nClaude 3.7 Sonnet has the same price as its predecessors: \\$3 per million input tokens and \\$15 per million output tokens—which includes thinking tokens.\nJust as humans use a single brain for both quick responses and deep reflection, we believe reasoning should be an integrated capability of frontier models rather than a separate model entirely. This unified approach also creates a more seamless experience for users.\nSecond, when using Claude 3.7 Sonnet through the API, users can also control the budget for thinking: you can tell Claude to think for no more than N tokens, for any value of N up to its output limit of 128K tokens. This allows you to trade off speed (and cost) for quality of answer.\nThird, in developing our reasoning models, we’ve optimized somewhat less for math and computer science competition problems, and instead shifted focus towards real-world tasks that better reflect how businesses actually use LLMs.\nClaude Code is an active collaborator that can search and read code, edit files, write and run tests, commit and push code to GitHub, and use command line tools—keeping you in the loop at every step.\nIn early testing, Claude Code completed tasks in a single pass that would normally take 45+ minutes of manual work, reducing development time and overhead.\nOur GitHub integration is now available on all Claude plans—enabling developers to connect their code repositories directly to Claude.\nThoughts My speculation for “fine-grained control over how long the model can think for” is probably through a condition for generating or some such token to early-stop thinking during the decoding process.\nAnthropic taking initial steps towards a product through Claude Code is very exciting. As a frontier AI company training the SOTA models, they are well-positioned to develop products using more than just the API. This is following OpenAI’s approach with products like SearchGPT.\n“Claude Code…completed…in…single pass…that would normally take 45+ minutes…” is just scratching the surface of the productivity gains possible. There are so, so many human tasks that can be easily automated with current LLMs already. An easy way to think about this is to focus on a single occupation in an economy at a time:\nProgrammer: migrating codebases across versions, libraries, etc., like Google and Airbnb did Doctor: diagnosis and prognosis largely Executive Assistant: most operational tasks like scheduling/re-scheduling meetings (e.g., move all meetings after 3pm 45 minutes ahead), responding to basic queries on behalf of their managers Taxi Driver: helping drivers better achieve goals like “I want to complete 10+ rides in the Queens region by 8pm” Of course, deeper domain knowledge about an area will help you identify problems and develop solutions better. As an AI researcher, here are things I would like to be automated for me:\nThere’s a new model/dataset on HuggingFace. Analyze/evaluate this new artifact and present a report of how this compares to this other version from a week ago Sift through my X/Twitter timeline to prepare a non-ad-revenue optimized version for my mood - AI news/funny memes/business news/cat gifs, etc. Turn last week’s popular AI papers on arxiv into a weekly newspaper like update for easy consumption Send me a quiz on core ML/math and grade my solutions … and so many more! It’s such an exciting future! My final thoughts go to what Anthropic predicts for 2027 - “Claude pioneers”. That’s the open-ended bit in my opinion. From my shaky ML/DL foundations, I understand that we are curve-fitting, i.e., fitting functions between existing data points, or interpolation between existing knowledge. “Pioneering” would mean extrapolating, i.e., coming up with a new perspective not in any of the current data points - this in my opinion is non-trivial from current methods. Maybe RL will take us there? Time (and experiment) will tell.\n",
  "wordCount" : "701",
  "inLanguage": "en",
  "datePublished": "2025-03-24T23:50:04-04:00",
  "dateModified": "2025-03-24T23:50:04-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://nihaljn.github.io/blog/claude-3.7-sonnet-and-claude-code/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Nihal Jain",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nihaljn.github.io/columbia-favicon.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://nihaljn.github.io/" accesskey="h" title="Nihal Jain (Alt + H)">Nihal Jain</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://nihaljn.github.io/blog/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://nihaljn.github.io/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://nihaljn.github.io/publications/" title="Publications">
                    <span>Publications</span>
                </a>
            </li>
            <li>
                <a href="https://nihaljn.github.io/shared/Nihal_Jain_CV_02-25.pdf" title="CV">
                    <span>CV</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Claude 3.7 Sonnet and Claude Code
    </h1>
    
    <div class="post-tags-meta">
      <a href="https://nihaljn.github.io/tags/agentic-ai/" class="post-tag">agentic-ai</a>
      <a href="https://nihaljn.github.io/tags/predictions/" class="post-tag">predictions</a>
      <a href="https://nihaljn.github.io/tags/news/" class="post-tag">news</a>
    </div>
    <div class="post-meta"><span title='2025-03-24 23:50:04 -0400 EDT'>March 24, 2025</span>

</div>
  </header> 
  <div class="post-content"><p><a href="https://www.anthropic.com/news/claude-3-7-sonnet">Link</a>. Originally published: Feb 24, 2025.</p>
<blockquote>
<p>we’re announcing Claude 3.7 Sonnet1, our most intelligent model to date and the first hybrid reasoning model on the market.</p></blockquote>
<blockquote>
<p>API users also have fine-grained control over <em>how long</em> the model can think for</p></blockquote>
<blockquote>
<p>we’re also introducing a command line tool for agentic coding, Claude Code. Claude Code is available as a limited research preview, and enables developers to delegate substantial engineering tasks to Claude directly from their terminal.</p></blockquote>
<blockquote>
<p>Claude 3.7 Sonnet has the same price as its predecessors: \$3 per million input tokens and \$15 per million output tokens—which includes thinking tokens.</p></blockquote>
<blockquote>
<p>Just as humans use a single brain for both quick responses and deep reflection, we believe reasoning should be an integrated capability of frontier models rather than a separate model entirely. This unified approach also creates a more seamless experience for users.</p></blockquote>
<blockquote>
<p>Second, when using Claude 3.7 Sonnet through the API, users can also control the <em>budget</em> for thinking: you can tell Claude to think for no more than N tokens, for any value of N up to its output limit of 128K tokens. This allows you to trade off speed (and cost) for quality of answer.</p></blockquote>
<blockquote>
<p>Third, in developing our reasoning models, we’ve optimized somewhat less for math and computer science competition problems, and instead shifted focus towards real-world tasks that better reflect how businesses actually use LLMs.</p></blockquote>
<blockquote>
<p><style>
    figcaption{
      text-align: center !important;
      color: gray !important;
      font-weight: normal !important;
      font-style: italic;
      font-size: 15px !important;
    }
  </style>
  
  
    <img loading="lazy" src="image1.png" alt="image1.png">
  
</p></blockquote>
<blockquote>
<p>Claude Code is an active collaborator that can search and read code, edit files, write and run tests, commit and push code to GitHub, and use command line tools—keeping you in the loop at every step.</p></blockquote>
<blockquote>
<p>In early testing, Claude Code completed tasks in a single pass that would normally take 45+ minutes of manual work, reducing development time and overhead.</p></blockquote>
<blockquote>
<p>Our GitHub integration is now available on all Claude plans—enabling developers to connect their code repositories directly to Claude.</p></blockquote>
<blockquote>
<p><style>
    figcaption{
      text-align: center !important;
      color: gray !important;
      font-weight: normal !important;
      font-style: italic;
      font-size: 15px !important;
    }
  </style>
  
  
    <img loading="lazy" src="image2.png" alt="image2.png">
  
</p></blockquote>
<h2 id="thoughts">Thoughts<a hidden class="anchor" aria-hidden="true" href="#thoughts">#</a></h2>
<ul>
<li>
<p>My speculation for &ldquo;fine-grained control over <em>how long</em> the model can think for&rdquo; is probably through a condition for generating <code>&lt;/think&gt;</code> or some such token to early-stop thinking during the decoding process.</p>
</li>
<li>
<p>Anthropic taking initial steps towards a product through Claude Code is very exciting. As a frontier AI company training the SOTA models, they are well-positioned to develop products using more than just the API. This is following OpenAI’s approach with products like <a href="https://openai.com/index/searchgpt-prototype/">SearchGPT</a>.</p>
</li>
<li>
<p>&ldquo;Claude Code&hellip;completed&hellip;in&hellip;single pass&hellip;that would normally take 45+ minutes&hellip;&rdquo; is just scratching the surface of the productivity gains possible. There are so, so many human tasks that can be easily automated with current LLMs already. An easy way to think about this is to focus on a single occupation in an economy at a time:</p>
<ul>
<li>Programmer: migrating codebases across versions, libraries, etc., like <a href="https://www.infoworld.com/article/3804552/heres-how-google-is-using-llms-for-complex-internal-code-migrations.html">Google</a> and <a href="https://medium.com/airbnb-engineering/accelerating-large-scale-test-migration-with-llms-9565c208023b">Airbnb</a> did</li>
<li>Doctor: diagnosis and prognosis largely</li>
<li>Executive Assistant: most operational tasks like scheduling/re-scheduling meetings (e.g.,  move all meetings after 3pm 45 minutes ahead), responding to basic queries on behalf of their managers</li>
<li>Taxi Driver: helping drivers better achieve goals like &ldquo;I want to complete 10+ rides in the Queens region by 8pm&rdquo;</li>
</ul>
<p>Of course, deeper domain knowledge about an area will help you identify problems and develop solutions better. As an AI researcher, here are things I would like to be automated for me:</p>
<ul>
<li>There’s a new model/dataset on HuggingFace. Analyze/evaluate this new artifact and present a report of how this compares to this other version from a week ago</li>
<li>Sift through my X/Twitter timeline to prepare a non-ad-revenue optimized version for my mood - AI news/funny memes/business news/cat gifs, etc.</li>
<li>Turn last week’s popular AI papers on arxiv into a weekly newspaper like update for easy consumption</li>
<li>Send me a quiz on core ML/math and grade my solutions</li>
<li>&hellip; and so many more! It’s such an exciting future!</li>
</ul>
</li>
<li>
<p>My final thoughts go to what Anthropic predicts for 2027 - &ldquo;<em>Claude pioneers</em>&rdquo;. That’s the open-ended bit in my opinion. From my shaky ML/DL foundations, I understand that we are curve-fitting, i.e., fitting functions between existing data points, <em>or</em> interpolation between existing knowledge. &ldquo;Pioneering&rdquo; would mean extrapolating, i.e., coming up with a new perspective not in any of the current data points - this in my opinion is non-trivial from current methods. Maybe RL will take us there? Time (and experiment) will tell.</p>
</li>
</ul>


  </div>

  <footer class="post-footer">
    
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://nihaljn.github.io/">Nihal Jain</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script>
document.addEventListener("DOMContentLoaded", function() {
    
    const footerSpans = document.querySelectorAll("footer.footer span");
    footerSpans.forEach(span => {
    if (span.textContent.includes("Powered by")) {
        
        span.innerHTML = span.innerHTML.replace("Powered by", "Theme based on");
    }
    });
});
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
